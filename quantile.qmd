---
title: "<span style='font-size: 80px;'>EViews 分位数回归模型</span>"
subtitle: "<span style='font-size: 80px;'>估计、检验与可视化</span>"
date: today
author: "<span style='color: #044875;'>Li Zongzhang</span>"
format: 
  revealjs:
    incremental: FALSE
    theme: sky
    slide-number: true
    chalkboard: 
      buttons: false
    preview-links: auto
    css: [styles.css, logo.css]
    footer: <https://lizongzhang.github.io/eviews>
    include-before-body: header.html
    code-block-height: 100px
    logo: img/bili_up.jpg
---


## 大纲

1 分位数回归模型简介

2 案例背景

3 分位数回归模型的估计

4 分位数回归模型的诊断

5 分位数回归模型的可视化

6 分位数回归的EViews代码

7 EViews使用经验分享

## 1 分位数回归模型：模型设定

- 解释变量对被解释变量的某个分位数的影响效应.

$$
Q_q\left(y_i \mid x_i\right)=x_i^{\prime} \beta_q
$$

## 1 分位数回归模型：估计思想

- 最小化 

$$
Q\left(\beta_q\right)=\sum_{i: y_i \geq x_i^{\prime} \beta}^n q\left|y_i-x_i^{\prime} \beta_q\right|+\sum_{i: y_i<x_i^{\prime} \beta}^n(1-q)\left|y_i-x_i^{\prime} \beta_q\right|
$$ 

- 0\<q\<1

- 当q取不同的值时，估计出相应的$β_q$。

- 利用线性规划求解出令$Q\left(\beta_q\right)$取到最小值的$β_q$

## 1 分位数回归模型：估计思想

当q等于0.5时：

$$
Q\left(\beta_{0.5}\right)=\sum_i^n\left|y_i-x_i^{\prime} \beta_{0.5}\right|
$$

- 实际上就是所有观测点的残差的绝对值之和。

- q等于0.5的分位数回归也称作中位数回归，其估计方法称作最小绝对离差法（Least Absolute-Deviation, 简称LAD）。

## 1 分位数回归模型：系数含义

$$
\frac{\partial Q_q(y \mid x)}{\partial x_j}=\beta_{q j}
$$

$β_{qj}$的含义是：当其他变量保持不变，$x_j$变化一单位，被解释变量的第$100*q$个百分位数将变化$β_{qj}$单位。

## 1 分位数回归模型：优势

- 克服了最小二乘回归模型中潜在的异方差问题

- 不受样本中异常值的影响，得到稳健的估计结果

- 能够更加细致地描述变量之间的关系。

## 1 分位数回归模型：适用场景

- 容量很大的样本数据，才适宜探究被解释变量的条件分布与解释变量的关系特征。

- 若样本容量太小，给定的解释变量和被解释变量的变异程度不够，是无法探究其分位数与解释变量的关系的。




## 2 案例背景

- 数据来源：美国医疗费用支出跟踪调查（Medical Expenditure Panel Survey，简称MEPS）

- 样本数据：从MEPS数据库中提取了2955个人的数据

<img src="img/download.png" alt="讲义" style="width: 24px; height: 24px;margin-right: 10px">[本例数据文件health.wf1下载](https://pan.baidu.com/s/1ypLO8PbEeolXNug7spmzhg?pwd=5678 )

![](img/data.png){.absolute top="400" left="30" width="700" height="300"}

## 3 分位数回归模型的估计


## 4 分位数回归模型的诊断

## 5 分位数回归模型的可视化

## 6 分位数回归模型的EViews代码

## 7 EViews使用经验分享

2.1 cty均值的检验

2.2 hwy均值的检验

2.3 四驱和前驱城市油耗比较

2.4 四驱和前驱高速油耗比较

2.5 自动档和手动挡城市油耗比较

2.5 自动档和手动挡高速油耗比较

# 加载包和调用数据

```{r}
#| echo: true
#| message: false
library(tidyverse)
library(ggstatsplot)
data(mpg)

```

## 2.1 cty均值的检验

```{r}
#| echo: TRUE
#| fig-width: 15
#| fig-height: 8
gghistostats(mpg, cty, 
             test.value = 16,
             bin.args = list(color = "black",
                             fill = "cyan")) +
  theme_classic(base_size = 15)
```

## 2.1 cty均值的检验

$H_0: \mu \leq 16$

$H_1: \mu > 16$

拒绝原假设$H_0: \mu \leq 16$ 。

在城市, 油耗均值大于16英里/加仑。



## 6 研究结论

-   四驱、前驱、后驱：45%，45%， 10%

-   驱动类型和传动类型相互独立。

-   驱动类型和气缸数量不独立。

    -   4缸，72%前驱，28%四驱

    -   6缸，54%前驱， 41%四驱，5%后驱

    -   8缸，1%前驱， 69%四驱，30%后驱

# 7 经验分享

-   类别的定义：自动挡和手动挡

-   各个类别的样本容量

-   提炼结论

## 

::: {style="text-align: center; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 60px;white-space: nowrap;"}
Thanks for your attention！
:::
